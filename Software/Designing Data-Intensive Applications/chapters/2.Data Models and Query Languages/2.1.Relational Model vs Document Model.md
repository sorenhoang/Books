## **Topic 2.1 — Relational Model vs Document Model**

The way we store and represent data significantly influences system design, query flexibility, performance characteristics, and evolvability. Relational and document data models represent two major approaches to structuring data in modern systems. Each model has strengths and trade-offs depending on data structure, query patterns, consistency requirements, and expected scale.

---

### **Relational Model Overview**

The relational model represents data in **tables (relations)** with rows (tuples) and columns (attributes). It is based on formal mathematical principles (set and predicate logic), providing strong consistency guarantees, well-defined schemas, and flexible querying capabilities.

Relational databases encourage **normalized** data structures—information is broken into logically independent tables and linked using relationships or foreign keys. This reduces duplication, enforces integrity, and supports complex queries involving joins.

Relational schema evolution historically required migration scripts, which can become challenging for rapidly evolving applications, although modern SQL systems (PostgreSQL, MySQL variants) have improved handling of schema evolution.

---

### **Strengths of the Relational Model**

* **Strong consistency:** ACID transactions ensure correctness across multiple operations.
* **Powerful querying:** Declarative SQL allows flexible joins, aggregations, and filtering without embedding logic in application code.
* **Normalization:** Reduces redundancy, supports data integrity, and avoids anomalies during updates or insertions.
* **Mature ecosystem:** Tools for backup, replication, indexing, sharding, and query optimization are well established.

---

### **Limitations of the Relational Model**

* Schema rigidity may slow iteration in systems with rapidly changing or unpredictable data structures.
* Joins across large datasets can be expensive in distributed architectures.
* Mapping relational schemas to application objects (ORM) introduces impedance mismatch.
* Storing deeply nested or highly hierarchical data may require many tables and joins, hurting readability and performance.

Relational systems excel when data consistency and structured queries are central requirements.

---

### **Document Model Overview**

The document model stores data as hierarchical, self-contained documents—typically JSON, BSON, or similar formats. Instead of splitting related fields across multiple tables, the document model encourages grouping related data together in a single entity.

This structure aligns well with how modern applications manipulate objects in code, making the data model more natural for developers. It also allows flexibility in schema evolution—documents can vary in structure without requiring schema migration across the entire dataset.

Document databases like MongoDB, Couchbase, and Firebase rely on this model and often optimize for high read/write throughput and developer agility.

---

### **Strengths of the Document Model**

* **Schema flexibility:** No need for predefined schemas; fields can vary between records.
* **Natural alignment with application logic:** Especially for object-oriented languages.
* **Efficient retrieval of aggregated objects:** No expensive joins when data normally accessed together is stored together.
* **Great for hierarchical or semi-structured data:** Nested fields, arrays, embedded relationships are first-class.

Document storage is highly effective for workflows where each record is largely independent.

---

### **Limitations of the Document Model**

* **Data duplication:** Denormalized storage means repeated structures across multiple documents.
* **Update anomalies:** A change to a shared structure must be updated in multiple documents, risking inconsistency.
* **Limited join support:** Some document DBs provide joins, but they are less efficient or discouraged.
* **Query flexibility can be limited:** Complex relationships across documents require additional logic in the application layer.

Document databases are powerful, but require careful design to avoid inconsistency and performance issues from excessive denormalization.

---

### **When to Use Relational vs Document Models**

The ideal choice depends on data access patterns, consistency guarantees, and system requirements.

| Scenario                                                           | Best Fit         |
| ------------------------------------------------------------------ | ---------------- |
| Data has many-to-many relationships and requires complex joins     | Relational Model |
| Highly structured, consistent data is required                     | Relational Model |
| Data is hierarchical, nested, or varies per record                 | Document Model   |
| Read patterns operate on whole entities rather than related tables | Document Model   |
| Application schema evolves quickly or is unknown in advance        | Document Model   |

Relational databases shine in structured, interconnected domains; document databases excel in flexible, hierarchical, or rapidly evolving contexts.

---

### **Schema Evolution**

Schema evolution differs between the two models:

* **Relational:** Requires migrations—altering schema for all rows. Risky at scale.
* **Document:** Allows gradual evolution. New fields added as needed; old documents remain valid.

However, flexibility requires discipline—document schemas can drift if validation rules are weak.

---

### **Hybrid and Polyglot Persistence**

Modern architectures often use both models:

* Relational DB for core transactional consistency
* Document store for user preferences, logs, session storage, or feature flags
* Search engine (Elasticsearch) for full-text queries
* Analytical database (Snowflake, BigQuery) for reports

This approach aligns storage engines with workloads rather than forcing a single model everywhere.

---

### **Key Principle**

Neither model is inherently superior. The choice depends on data patterns, operational requirements, and system constraints. Relational databases prioritize consistency and structured querying; document databases prioritize flexibility and representation of real-world hierarchical structures. Effective systems often blend both approaches to balance expressiveness, performance, and maintainability.

